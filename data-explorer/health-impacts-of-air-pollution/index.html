<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>
    Health impacts of air pollution: data for NYC. &#x7c; Environment &amp; Health Data Portal
</title>






<meta name="description" content="Here is the site global SEO description">
<link rel="canonical" href="https://nycehs.github.io/ehs-data-portal-frontend-temp/data-explorer/health-impacts-of-air-pollution/" />
<meta name="robots" content="all" />
<meta name="geo.region" content="" />
<meta name="geo.placename" content="Environment &amp; Health Data Portal" />


<meta property="fb:profile_id" content="0" />
<meta property="og:type" content="website" />
<meta property="og:locale" content="en_us" />
<meta property="og:url" content="https://nycehs.github.io/ehs-data-portal-frontend-temp/data-explorer/health-impacts-of-air-pollution/" />
<meta property="og:title" content="Health impacts of air pollution: data for NYC. &ndash; Environment &amp; Health Data Portal" />
<meta property="og:description" content="Explore data, visualizations, and more." />
<meta property="og:site_name" content="Environment &amp; Health Data Portal" />
<meta property="og:image" content="https://nycehs.github.io/ehs-data-portal-frontend-temp/images/report_bottom_background_hu55023dbc37de342337a21cf33dcc5889_222582_2400x1260_fill_q75_box_smart1.jpg">

<meta property="og:see_also" content="https://twitter.com/nycHealthy" />


<meta name="twitter:title" content="Health impacts of air pollution: data for NYC. &ndash; Environment &amp; Health Data Portal">
<meta name="twitter:description" content="Explore data, visualizations, and more.">
<meta name="twitter:image" content="/images/report_bottom_background.jpg">
<meta name="twitter:site" content="@nycHealthy">
<meta name="twitter:creator" content="@nycHealthy">


<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>


<link rel="stylesheet" href="../../fontawesome/css/all.min.css">
<link rel="stylesheet" href="https://nycehs.github.io/ehs-data-portal-frontend-temp/scss/theme.css" />


  </head>
  <body>

    

    
<a class="sr-only sr-only-focusable skip-menu" href="#skip-header-target">Skip Header</a>

<header id="global-header" role="banner">

    <div class="bg-black text-white" id="nyc-top-header">

        <div class="container-fluid wide">

            <div class="row py-1 align-items-center justify-content-between">

                <div class="col-auto">
                    <p class="d-none d-md-flex fs-md">
                        <a class="text-reset" href="https://www1.nyc.gov/">
                            <strong>nyc.gov</strong>
                        </a>
                        <span class="mx-1" aria-hidden="true">|</span>
                        Health
                    </p>
                </div>
                

                <div class="col-auto">

                    <ul class="extensible-list horizontal fs-md">
                        <li>
                            <a class="text-reset" href="https://www1.nyc.gov/">
                                <strong>
                                    311
                                </strong>
                            </a>
                        </li>
                        <li>
                            <a class="text-reset" href="https://www1.nyc.gov/home/search/index.page">
                                <strong>
                                    Search all NYC.gov
                                </strong>
                            </a>
                        </li>
                        <li>
                            <a href="https://www1.nyc.gov/" title="Go to nyc.gov">
                                <img class="d-block" src="../../images/nyc-bubble-logo.svg" width="45" alt="NYC Logo">
                            </a>
                        </li>
                    </ul>

                </div>
                

            </div>
            

        </div>
        

    </div>
    
    <div class="site-header bg-primary" style="background-image: url(/ehs-data-portal-frontend-temp/images/header_background.jpg)">
        <div class="wrap-header">

            <div class="container-fluid wide">

                <div class="row align-items-center">

                    <div class="col-lg py-4 pl-md-5">

                        <div class="d-flex justify-content-center justify-content-lg-start">

                            <p class="text-white">
                                <span class="site-title">Environment and Health Data Portal</span>
                                <span class="site-subtitle">Explore data on how environments shape health in New York
                                    City</span>
                            </p>


                        </div>
                        

                    </div>
                    

                    <div class="col-lg-auto border-top border-lg-0">

                        <div class="row no-gutters justify-content-between py-2">

                            
                            <div class="col-auto d-flex d-lg-none">

                                <button class="no-btn-style" type="button" data-toggle="collapse"
                                    data-target="#nav-primary" aria-controls="nav-primary" aria-expanded="false"
                                    aria-label="Toggle navigation">
                                    <span class="fas fa-bars fa-lg"></span>
                                </button>

                            </div>
                            

                            <div class="col-auto">

                                <ul class="extensible-list horizontal">
                                    <li>
                                        <button class="no-btn-style" type="button" title="Language"
                                            data-toggle="collapse" data-target="#global-language"
                                            aria-controls="global-language" aria-expanded="false">
                                            <span class="sr-only">Language</span>
                                            <span class="fas fa-language fa-2x"></span>
                                        </button>
                                    </li>
                                    <li>
                                        <button class="no-btn-style" type="button" title="Search" data-toggle="collapse"
                                            data-target="#global-search" aria-controls="global-search"
                                            aria-expanded="false">
                                            <span class="sr-only">Search</span>
                                            <span class="fas fa-search fa-lg"></span>
                                        </button>
                                    </li>
                                </ul>

                            </div>
                            

                        </div>
                        

                    </div>
                    

                </div>
                

            </div>
            

        </div>
        

        <div class="container-fluid border-top collapse" id="global-language">
            <div class="narrow py-2">
                <div id="google_translate_element"></div>
            </div>
        </div>

        <div class="container-fluid border-top collapse" id="global-search">
            <form class="narrow py-2" aria-label="Search" role="search">
                <div class="input-group">
                    <label class="sr-only" for="global-search-bar">Search</label>
                    <input class="form-control form-control-lg" id="global-search-bar" placeholder="Search">
                    <div class="input-group-btn">
                        <button class="btn btn-primary btn-lg" type="button" title="Search">
                            <span class="sr-only">Search</span>
                            <span class="fas fa-arrow-right"></span>
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="container-fluid collapse d-lg-block px-0 border-lg-top" id="nav-primary">

        <div class="wide"> 

            <nav class="nav nav-pills border-bottom" role="navigation">
                
                
                <div class="nav-item">

                    <a class="nav-link" href="../../" id="nav-item-01">
                        <span class='text-primary'><i class='fa fa-home' aria-hidden='true'></i></span> Home
                    </a>

                </div>
                
                <div class="nav-item">

                    <a class="nav-link" href="../../data-stories/" id="nav-item-02">
                        <span class='text-primary'><i class='fas fa-passport' aria-hidden='true'></i></span> Data Stories
                    </a>

                </div>
                
                <div class="nav-item">

                    <a class="nav-link" href="../../neighborhood-reports/" id="nav-item-04">
                        <span class='text-primary'><i class='fas fa-map-marked-alt' aria-hidden='true'></i></span> Neighborhood Reports
                    </a>

                </div>
                
                <div class="nav-item">

                    <a class="nav-link" href="../../key-topics/" id="nav-item-05">
                        <span class='text-primary'><i class='fas fa-star' aria-hidden='true'></i></span> Key Topics
                    </a>

                </div>
                
                <div class="nav-item active">

                    <a class="nav-link" href="../../data-explorer/" id="nav-item-03">
                        <span class='text-primary'><i class='fas fa-chart-line' aria-hidden='true'></i></span> Data Explorer
                    </a>

                </div>
                </nav>

        </div>
        

    </div>

</header>



    

    <main id="skip-header-target" role="main"><article class="container-fluid" id="skip-header-target">
    <div class="row">
        <div class="col-md-11 mx-auto mt-4 mx-1">
            <nav aria-label="breadcrumb" class="mb-2">
                <ul class="breadcrumb mr-auto">
                    <li class="breadcrumb-item"><a href="https://nycehs.github.io/ehs-data-portal-frontend-temp/">Home</a></li>
                    <li class="breadcrumb-item"><a href="https://nycehs.github.io/ehs-data-portal-frontend-temp//data-explorer/">Data Explorer</a></li>
                    <li class="breadcrumb-item active"><a href="../../data-explorer/health-impacts-of-air-pollution/">Health Impacts of Air Pollution</a></li>
                </ul>
            </nav>

            <div class="row">
               <div class="col-3 ml-auto my-1">
                <form class="autocomplete-form">
                    <div class="row no-gutters">
                    <label for="all-data" class="block col-sm-12 font-weight-bold h4 mb-3 sr-only">Search data</label>
                    <div class="col-9">
                        <div class="autocomplete-wrapper" width="100%">
                        <select name="all-data" id="all-data">
                            <option value=""><i class="fas fa-search mr-2"></i>Search data</option>
                        </select>
                        </div>
                    </div>
                    <div class="col-3">
                        <button type="submit" class="btn-primary btn btn-block" style="height:40px;"><i class="fas fa-search"></i></button> 
                    </div>
                    </div>
                </form>
               </div>
            </div>

            <div class="row mb-2">
                <div class="col border-bottom mx-2 ml-0 pl-0 pb-2 mb-2">
                    <h2>Health Impacts of Air Pollution</h2>
                </div>
            </div>

            <style>
                 
                [aria-expanded="false"] > .expanded,
                [aria-expanded="true"] > .collapsed {
                  display: none;
                }

                #truncate {
                    display: block;
                }

                #full {
                    display: none;
                }

                #expand-collapse {
                    cursor: pointer;
                }

                .show {
                display: block!important;
                }

                .hide {
                display: none!important;
                }

                 

                .dropdown-title {
                    padding: 0.25rem 1.5rem;
                }

                .indicator-measures h6 {
                    margin-top: 0.5em;
                }

            </style>

            
            <script src="https://cdn.jsdelivr.net/npm/apache-arrow@latest"></script>
            <script src="https://cdn.jsdelivr.net/npm/arquero@latest"></script>

            
            <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>

            
            <script src="https://cdn.jsdelivr.net/npm/vega@5.21.0"></script>
            <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.2.0"></script>
            <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.20.2"></script>
            
            
            <script src="https://d3js.org/d3.v5.min.js"></script>

            <script>
                    let indicators = []; 
                    let selectedSummaryYears = [];
                    let selectedSummaryGeography = [];
                    let aboutMeasures;
                    let dataSources;

                    let measureAbout = `N/A`;
                    let measureSources = `N/A`;
                    let geoTable;
                    let aqData;
                    let joinedAqData;

                    let fullDataMapObjects;
                    let fullDataTrendObjects;
                    let fullDataLinksObjects;

                    let indicator;
                    let defaultIndicator = false;
                    let indicatorName;
                    let indicatorDesc;
                    let indicatorShortName;
                    let indicatorMeasurses;
                    let indicatorId;

                    let defaultTrendMeasure = [];
                    let defaultMapMeasure = [];
                    let defaultLinksMeasure = [];
                    let selectedMapMeasure = false
                    let selectedTrendMeasure = false;
                    let selectedLinksMeasure = false;
                    let selectedMapAbout;
                    let selectedMapSources;
                    let selectedTrendAbout;
                    let selectedTrendSources;
                    
                    let mapMeasures = [];
                    let trendMeasures = [];
                    let linksMeasures = [];


                    let tabMap;
                    let tabTrend;
                    let tabLinks;
                
                    const updateChartPlotSize = () => {
                        setTimeout(() => {
                            window.dispatchEvent(new Event('resize'));
                        }, 200)
                    }

                    document.addEventListener("DOMContentLoaded", () => {
                        tabTable = document.querySelector('#tab-btn-table');
                        tabMap = document.querySelector('#tab-btn-map');
                        tabTrend = document.querySelector('#tab-btn-trend');
                        tabLinks = document.querySelector('#tab-btn-links');
                        aboutMeasures = document.querySelector('.indicator-measures');
                        dataSources = document.querySelector('.indicator-sources');
                        
                        $('#tab-btn-table').on('shown.bs.tab', function(e){
                            $($.fn.dataTable.tables(true)).DataTable()
                                .columns.adjust();

                            renderAboutSources(measureAbout, measureSources)
                        });
                        
                        tabMap.addEventListener('click', () => {
                            updateChartPlotSize();
                            if (!selectedMapMeasure) {
                                renderAboutSources(defaultMapMeasure[0].how_calculated, defaultMapMeasure[0].Sources);
                            } else {
                                renderAboutSources(selectedMapAbout, selectedMapSources);
                            }
                        });
                        tabTrend.addEventListener('click', () => {
                            updateChartPlotSize();
                            if (!selectedTrendMeasure) {
                                renderAboutSources(defaultTrendMeasure[0].how_calculated, defaultTrendMeasure[0].Sources);
                            } else {
                                renderAboutSources(selectedTrendAbout, selectedTrendSources);
                            }
                            
                        });
                        tabLinks.addEventListener('click', () => {
                            updateChartPlotSize();
                        });
                    });


                    function reveal() {
                        document.getElementById('truncate').classList.toggle('hide');
                        document.getElementById('full').classList.toggle('show');
                        document.getElementById('contenttoggle').innerHTML = `Show less... <i class="fas fa-caret-square-up" aria-hidden="true"></i>`;
                    }

                    fetch('https://raw.githubusercontent.com/nychealth/EHDP-data/main/indicators/indicators.json')
                        .then(response => response.json())
                        .then(data => {
                            indicators = data;
                            loadIndicator()
                            // loadData(indicatorId)
                        })
                        .catch(error => console.log(error));            

                    // join the data
                    const joinData = () => {
                        joinedAqData = aqData
                            .join(geoTable, [["GeoID", "GeoType"], ["GeoID", "Geotype"]])
                                .relocate(['Name'], { after: 'GeoID' })
                                .relocate(['Geotype'], { before: 'GeoID' })
                                .rename({
                                    'Name': 'Geography',
                                })
                        
                        const filterUHF42 = joinedAqData.filter(d => d.GeoType == 'UHF42').objects();
                        const filterUHF34 = joinedAqData.filter(d => d.GeoType == 'UHF34').objects();
                        const filterBorough = joinedAqData.filter(d => d.GeoType  == 'Borough').objects();
                        const filterCitywide = joinedAqData.filter(d => d.GeoType  == 'Citywide').objects();

                        fullDataMapObjects = filterUHF42;
                        fullDataTrendObjects = [...filterBorough].concat(filterCitywide);
                        fullDataLinksObjects = joinedAqData;

                        renderMeasures();
                    }

                    const loadGeo = () => {
                        // const geoUrl = `https://raw.githubusercontent.com/nychealth/EHDP-data/main/geography/GeoLookup.csv`;
                        const geoStatic = `/ehs-data-portal-frontend-temp/IndicatorData/GeoLookup.csv`;

                        aq.loadCSV(geoStatic)
                            .then(data => {
                                geoTable = data
                                    .derive({ GeoID: d => op.parse_int(d.GeoID) }) // convert GeoIDs to numbers
                                // console.log("---- Geo Names 1 (post-load) ----")
                                // geoTable.print();
                                joinData(); // run the next function 
                            });
                    }

                    const loadData = (indicatorId) => {
                        // Loads data as an arquero table
                        fetch(`https://raw.githubusercontent.com/nychealth/EHDP-data/main/indicators/data/${indicatorId}.json`)
                            .then(response => response.json())
                            .then(data => {

                                loadGeo(); // run the next function
                                aqData = aq.from(data)
                                    .groupby("Time", "GeoType", "GeoID")
                                    .pivot("MeasurementType", "Value")
                                console.log('==========================================================================')
                                console.log('Load Date - aqData')
                                aqData.print();
                            })
                    }

                    const handleYearFilter = (el, indicatorId) => {
                        el.addEventListener('change',(e) => {
                            if (e.target.checked) {
                                console.log('checked')
                                selectedSummaryYears.push(e.target.value)
                            } else {
                                selectedSummaryYears = selectedSummaryYears.filter(item => item !== e.target.value);
                            }
                            console.log('years selected: ', selectedSummaryYears)
                            renderTable()
                        })
                    }

                    const handleGeoFilter = (el, indicatorId) => {
                        el.addEventListener('change',(e) => {
                            if (e.target.checked) {
                                selectedSummaryGeography.push(e.target.value)
                            } else {
                                selectedSummaryGeography = selectedSummaryGeography.filter(item => item !== e.target.value);
                            }
                            console.log('geo selected: ', selectedSummaryGeography)
                            renderTable()
                        })
                    }

                    const handleToggle = () => { 
                        $('body').off('click', '#summary-table tr.group td');
                        $('body').on('click', '#summary-table tr.group td', (e) => {
                            const td = $(e.target);
                            const tr = td.parent();
                            const group = td.data('group');
                            const groupLevel = td.data('group-level');

                            const handleGroupToggle = () => {
                                
                                const subGroupToggle = $(`td[data-year="${group}"][data-group-level="1"]`);
                                const subGroupRow = $(`tr[data-year="${group}"]`);

                                if (subGroupToggle.css('display') === 'none') {
                                    subGroupToggle.removeClass('hidden');
                                    subGroupRow.removeClass('hidden');
                                    td.removeClass('hidden');
                                    subGroupToggle.show();
                                    subGroupRow.show();
                                } else {
                                    subGroupToggle.addClass('hidden');
                                    subGroupRow.addClass('hidden');
                                    td.addClass('hidden');
                                    subGroupToggle.hide();
                                    subGroupRow.hide();
                                }
                            }

                            const handleSubGroupToggle = () => {
                                const subDataGroup = tr.next(`tr`).data(`group`);
                                const parentDataGroup = subDataGroup.split('-')[0];
                                const subGroupRow = $(`tr[data-group="${subDataGroup}"]`);
                                const parentGroupToggle = $(`td[data-group="${parentDataGroup}"]`);

                                if (subGroupRow.css('display') == 'none')  {
                                    subGroupRow.show();
                                    td.removeClass('hidden');
                                    subGroupRow.removeClass('hidden');
                                    parentGroupToggle.removeClass('hidden');
                                } else {
                                    subGroupRow.hide();
                                    td.addClass('hidden');
                                    subGroupRow.addClass('hidden');
                                }
                            }

                            if (groupLevel === 0) {
                                handleGroupToggle();
                            } else {
                                handleSubGroupToggle();
                            }

                        });
                    }

                    // Renders the Indicator Title and Description
                    const renderTitleDescription = (title, desc) => {
                        const indicatorTitle = document.querySelector('.indicator-title');
                        const indicatorDescription = document.querySelector('.indicator-description');
                        indicatorTitle.innerHTML = title;
                        indicatorDescription.innerHTML = `<strong>Indicator description: </strong> ${desc}`;
                    }

                    // Renders copy for the About the measures and the Data sources sections
                    const renderAboutSources = (about, sources) => {
                        aboutMeasures.innerHTML = about;
                        dataSources.innerHTML = sources;
                    }

                    // Render Table usein DataTables
                    const renderTable = () => {
                        
                        const groupColumnYear = 0
                        const groupColumnGeo = 1;
                        const groupId = 0

                        const filteredTableData = joinedAqData.objects().filter(d =>
                            selectedSummaryYears.includes(d.Time) && selectedSummaryGeography.includes(d.GeoType)
                        )
                        const filteredTableAqData = aq.from(filteredTableData)

                        console.log('==========================================================================')
                        console.log('RENDER TABLE DATA - Filtered Data: ', filteredTableAqData)

                        // call function to show table
                        document.getElementById('summary-table').innerHTML = filteredTableAqData.toHTML(); // print dataTable to HTML
                        document.querySelector('#summary-table table').id = "tableID"
                        document.querySelector('#summary-table table').className = "cell-border stripe compact" // this gives the table an ID (table code generated by Arquero)

                        $('#tableID').DataTable({
                            scrollY: 500,
                            scrollCollapse: true,
                            searching: false,
                            paging: false,
                            bInfo: false,
                            "columnDefs": [
                                { "visible": false, "targets": [0, 1, 2, 3 ]}
                            ],
                            "createdRow": function ( row, data, index ) {
                                console.log('RENDER TABLE FUNCTION - CreatedRow')
                                const time    = data[0];
                                const geoType = data[1];
                                if (time && geoType) {
                                    row.setAttribute(`data-group`, `${time}-${geoType}`)
                                    row.setAttribute(`data-year`, `${time}`);
                                }
                            },
                            "drawCallback": function ( settings ) {
                                console.log('RENDER TABLE FUNCTION - DrawCallback')
                                const api = this.api();
                                const data = api.rows( {page:'current'} ).data()
                                const rows = api.rows( {page:'current'} ).nodes();
                                const totaleColumnsCount = api.columns().count()
                                const visibleColumnsCount =  totaleColumnsCount - 4;

                                var last = null;
                                var lastYr = null;
                                const createGroupRow = (groupColumn, lvl) => {
                                    api.column(groupColumn, {page:'current'} ).data().each( function ( group, i ) {
                                        const year = data[i][0]
                                        const groupName = `${year}-${group}`
                                        if ( last !== group || lastYr !== year ) {
                                            $(rows).eq( i ).before(
                                                `<tr class="group"><td colspan="${visibleColumnsCount}" data-year="${year}" data-group="${group}" data-group-level="${lvl}"> ${group}</td></tr>`
                                            );
                                            last = group;
                                            lastYr = year
                                        }
                                    });
                                }

                                createGroupRow(groupColumnYear, 0);
                                createGroupRow(groupColumnGeo, 1);
                                handleToggle();
                            }
                        })
                    }

                    // Render Map using Vegalite
                    const renderMap = (selectedData, selectedMeasure, selectedDisplay, selectedDate, selectedAbout, selectedSources) => {
                        const mapYears =  [...new Set(fullDataMapObjects.map(item => item.Time))];
                        const filteredfullDataMapObjects = fullDataMapObjects.filter(obj => 
                            obj.Time === mapYears[0]
                        )
                        let mapMeasure = selectedMeasure ? selectedMeasure : defaultMapMeasure[0].MeasurementType;
                        let mapData = selectedData ?  selectedData : filteredfullDataMapObjects;
                        let mapDisplay = selectedDisplay ? selectedDisplay : defaultMapMeasure[0].DisplayType;
                        let mapDate = selectedDate ? selectedDate : filteredfullDataMapObjects[0].Time;

                        console.log('==========================================================================')
                        console.log('RENDER MAP DATA - Maeasure Default: ', defaultMapMeasure)
                        console.log('RENDER MAP DATA - Maeasure Selected: ', selectedMeasure)
                        console.log('RENDER MAP DATA - Maeasure Filtered Default Data: ', filteredfullDataMapObjects)
                        console.log('RENDER MAP DATA - Maeasure Filtered Selcted Data: ', selectedData)

                        // let spec2 = {
                        //     "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                        //     "title": "This is my good schema!",
                        //     "width": 700,
                        //     "data": {
                        //         "url": "https://gist.githubusercontent.com/mmontesanonyc/28953366ac41a0ecf24470a3cefb6cea/raw/4b2869cc9fe93a4ae4e33b2acc0aad5570c498a0/2380-reduced.csv"
                        //     },
                        //     "params": [
                        //         {"name": "highlight", "select": {"type": "point", "on": "mouseover"}}
                        //     ],
                        //     "projection": {"type": "mercator"},
                        //     "vconcat": [
                        //         {
                        //         "height": 550,
                        //         "width": 900,
                        //         "mark": {"type": "geoshape", "stroke": "#000000"},
                        //         "encoding": {
                        //             "shape": {"field": "geo", "type": "geojson"},
                        //             "color": {
                        //             "bin": false,
                        //             "field": "Value",
                        //             "type": "quantitative",
                        //             "scale": {"scheme": {"name": "purples", "extent": [0.25, 1]}}
                        //             },
                        //             "strokeWidth": {
                        //             "condition": [{"param": "highlight", "empty": false, "value": 2}],
                        //             "value": 0.5
                        //             },
                        //             "tooltip": [
                        //                 {"field": "GeoID", "title": "GeoID"},
                        //                 {
                        //                     "field": "Value",
                        //                     "type": "quantitative",
                        //                     "title": "Value"
                        //                 },
                        //                 {"field":"MeasureID","title":"Measure"}
                        //             ],
                        //         },
                        //         "transform": [
                        //             {
                        //             "lookup": "Geography-ID",
                        //             "from": {
                        //                 "data": {
                        //                 "url": "https://raw.githubusercontent.com/nycehs/NYC_geography/master/UHF42.topo.json",
                        //                 "format": {"type": "topojson", "feature": "collection"}
                        //                 },
                        //                 "key": "properties.GEOCODE"
                        //             },
                        //             "as": "geo"
                        //             }
                        //         ]
                        //         },
                        //         {
                        //         "height": 150,
                        //         "width": "container",
                        //         "mark": {"type": "bar", "tooltip": true, "stroke": "#000000"},
                        //         "encoding": {
                        //             "y": {"field": "Value", "type": "quantitative", "title": null},
                        //             "tooltip": [
                        //             {"field": "Geography-ID", "title": "GeoID"},
                        //             {"field": "Value", "type": "quantitative", "title": "Value"},
                        //             {"field": "MeasureID", "title": "Measure"}
                        //             ],
                        //             "x": {"field": "Geography-ID", "sort": true, "axis": null},
                        //             "color": {
                        //             "bin": false,
                        //             "field": "Value",
                        //             "type": "quantitative",
                        //             "scale": {"scheme": {"name": "purples", "extent": [0.25, 1]}}
                        //             },
                        //             "strokeWidth": {
                        //             "condition": [{"param": "highlight", "empty": false, "value": 2}],
                        //             "value": 0.5
                        //             }
                        //         }
                        //         }
                        //     ]
                        // }

                        spec3 = {
                            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                            "title": `${mapDate} - ${mapMeasure} ${mapDisplay && `(${mapDisplay})`} `,
                            "width": "container",
                            "data": {
                                "values": mapData,
                            },
                            "params": [
                                {"name": "highlight", "select": {"type": "point", "on": "mouseover"}}
                            ],
                            "projection": {"type": "mercator"},
                            "vconcat": [
                                {
                                "height": 550,
                                "width": "container",
                                "mark": {"type": "geoshape", "stroke": "#000000"},
                                "encoding": {
                                    "shape": {"field": "geo", "type": "geojson"},
                                    "color": {
                                    "bin": false,
                                    "field": mapMeasure,
                                    "type": "quantitative",
                                    "scale": {"scheme": {"name": "purples", "extent": [0.25, 1]}}
                                    },
                                    "strokeWidth": {
                                    "condition": [{"param": "highlight", "empty": false, "value": 2}],
                                    "value": 0.5
                                    },
                                    "tooltip": [
                                        {"field": "Geography", "title": "Geography"},
                                        {
                                            "field": mapMeasure,
                                            "type": "quantitative",
                                            "title": "Value"
                                        },
                                    ],
                                },
                                "transform": [
                                    {
                                    "lookup": "GeoID",
                                    "from": {
                                        "data": {
                                        "url": "https://raw.githubusercontent.com/nycehs/NYC_geography/master/UHF42.topo.json",
                                        "format": {"type": "topojson", "feature": "collection"}
                                        },
                                        "key": "properties.GEOCODE"
                                    },
                                    "as": "geo"
                                    }
                                ]
                                },
                                // {
                                //     "mark": {
                                //         "type": "bar", 
                                //         "tooltip": true, 
                                //         "stroke": "#000000"},
                                //         "orient": "x",
                                //     "encoding": {
                                //         "color": {
                                //             "field": "valiues",
                                //             "type": "quantitative",
                                //             "legend": {
                                //                 "direction": "horizontal",
                                //                 "orient": "bottom",
                                //             }
                                //         }
                                //     }
                                // },
                                {
                                "height": 150,
                                "width": "container",
                                "mark": {"type": "bar", "tooltip": true, "stroke": "#000000"},
                                "encoding": {
                                    "y": {"field": mapMeasure, "type": "quantitative", "title": null},
                                    "tooltip": [
                                        {"field": "Geography", "title": "GeoID"},
                                        {"field": mapMeasure, "type": "quantitative", "title": "Value"},
                                        // {"field": "MeasureID", "title": "Measure"}
                                    ],
                                    "x": {"field": "GeoID", "sort": true, "axis": null},
                                        "color": {
                                        "bin": false,
                                        "field": mapMeasure,
                                        "type": "quantitative",
                                        "scale": {"scheme": {"name": "purples", "extent": [0.25, 1]}},
                                        "legend": null
                                    },
                                    "strokeWidth": {
                                        "condition": [{"param": "highlight", "empty": false, "value": 2}],
                                    "value": 0.5
                                    }
                                }
                                }
                            ]
                        }

                        vegaEmbed("#map", spec3);
                    }

                    // Render Trend Chart using Vegalite
                    const renderTrendChart = (selectedData, selectedMeasure, selectedDisplay, slectedDisparities) => {

                        let trendMeasure = selectedMeasure ? selectedMeasure : defaultTrendMeasure[0].MeasurementType;
                        let trendData = selectedData ?  selectedData : fullDataTrendObjects;
                        let trendDisplay = selectedDisplay ? selectedDisplay : defaultTrendMeasure[0].DisplayType;
                        let trendDisparity = slectedDisparities ? slectedDisparities : defaultTrendMeasure[0].VisOptions[0]?.Trend[0]?.Disparities
                        
                        console.log('==========================================================================')
                        console.log('RENDER TREND DATA - Maeasure Default: ', defaultTrendMeasure)
                        console.log('RENDER TREND DATA - Maeasure Selected: ', selectedMeasure)
                        console.log('RENDER TREND DATA - Maeasure Filtered Default Data: ', fullDataTrendObjects)
                        console.log('RENDER TREND DATA - Maeasure Filtered Selcted Data: ', selectedData)
                        console.log('RENDER TREND DATA - Maeasure Disparity: ', trendDisparity)
                        const tabTrendDropDown = document.querySelector('#tab-trend  .dropdown');
                        const btnShowDisparitires = document.querySelector('.btn-show-disparities');

                        if (trendDisparity == 1 && !btnShowDisparitires) {
                            tabTrendDropDown.innerHTML += `<button class="btn btn-sm float-right btn-outline-success btn-show-disparities">Show Dispartites</button> `;
                        }   else if (btnShowDisparitires) {
                            tabTrendDropDown.removeChild(btnShowDisparitires)
                        }

                        var spec = {
                            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                            "config": {
                            "background": "#FFFFFF",
                            "title": {"anchor": "start", "fontSize": 18, "font": "Calibri"},
                            "axisX": {
                            "domain": true,
                            "domainColor": "#000000",
                            "domainWidth": 1,
                            "grid": false,
                            "labelFontSize": 12,
                            "labelAngle": 0,
                            "tickColor": "#000000",
                            "tickSize": 5,
                            "titleFontSize": 12,
                            "titlePadding": 10
                            },
                            
                            "axisY": {
                            "domain": false,
                            "domainWidth": 1,
                            "grid": true,
                            "gridColor": "#DEDDDD",
                            "gridWidth": 1,
                            "labelFontSize": 12,
                            "labelPadding": 8,
                            "ticks": false,
                            "titleFontSize": 12,
                            "titlePadding": 10,
                            "titleFont": "Lato",
                            "titleAngle": 0,
                            "titleY": -10,
                            "titleX": 18
                            },


                            "view": {"stroke": "transparent"},

                            "range": {
                            "category": [
                                "#1696d2",
                                "#000000",
                                "#fdbf11",
                                "#ec008b",
                                "#d2d2d2",
                                "#55b748"
                            ]
                            },

                            "line": {"color": "#1696d2", "stroke": "#1696d2", "strokeWidth": 3},


                            "point": {"filled": true},
                            "text": {
                            "color": "#1696d2",
                            "fontSize": 11,
                            "align": "center",
                            "fontWeight": 400,
                            "size": 11
                            }
                        },
                            "data": {
                                "url": "https://gist.githubusercontent.com/mmontesanonyc/6b0aa75affc6a60978f73e11d2f58bb3/raw/e944d335042e3da0c8e99a4df0fbebc8aac4cc15/asthmatrend.csv"
                            },
                            "width": "container",
                            "height": 550,
                            "encoding": {
                            "x": {
                                "field": "Year",
                                "type": "temporal",
                                "title": ""
                            }
                            },
                            "layer": [
                            {
                                "encoding": {
                                "color": {
                                    "field": "GeoName",
                                    "type": "nominal",
                                    "legend": {
                                    "orient": "right",
                                    "title": null
                                    }
                                },
                                "y": {
                                    "field": "Value",
                                    "type": "quantitative",
                                    "title": ""
                                }
                                },
                                "layer": [
                                {
                                    "mark": {
                                    "type": "line",
                                    "point": {"filled": false, "fill": "white"}
                                    }

                                },
                                {
                                    "transform": [
                                    {
                                        "filter": {
                                        "param": "hover",
                                        "empty": false
                                        }
                                    }
                                    ],
                                    "mark": "point"
                                }
                                ]
                            },
                            {
                                "transform": [
                                {
                                    "pivot": "GeoName",
                                    "value": "Value",
                                    "groupby": [
                                    "Year"
                                    ]
                                }
                                ],
                                "mark": "rule",
                                "encoding": {
                                "opacity": {
                                    "condition": {
                                    "value": 0.3,
                                    "param": "hover",
                                    "empty": false
                                    },
                                    "value": 0
                                },
                                "tooltip": [
                                    {
                                    "field": "Citywide",
                                    "type": "quantitative"
                                    },
                                    {
                                    "field": "The Bronx",
                                    "type": "quantitative"
                                    },
                                    {
                                    "field": "Brooklyn",
                                    "type": "quantitative"
                                    },
                                    {
                                    "field": "Manhattan",
                                    "type": "quantitative"
                                    },
                                    {
                                    "field": "Queens",
                                    "type": "quantitative"
                                    }
                                ]
                                },
                                "params": [
                                {
                                    "name": "hover",
                                    "select": {
                                    "type": "point",
                                    "fields": [
                                        "Year"
                                    ],
                                    "nearest": true,
                                    "on": "mouseover",
                                    "clear": "mouseout"
                                    }
                                }
                                ]
                            }
                            ]
                        }
                        

                        var spec2 = {
                            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                            "config": {
                            "background": "#FFFFFF",
                            // "title": {"anchor": "start", "fontSize": 18, "font": "Calibri"},
                            "axisX": {
                            "domain": true,
                            "domainColor": "#000000",
                            "domainWidth": 1,
                            "grid": false,
                            "labelFontSize": 12,
                            "labelAngle": 0,
                            "tickColor": "#000000",
                            "tickSize": 5,
                            "titleFontSize": 12,
                            "titlePadding": 10
                            },
                            
                            "axisY": {
                            "domain": false,
                            "domainWidth": 1,
                            "grid": true,
                            "gridColor": "#DEDDDD",
                            "gridWidth": 1,
                            "labelFontSize": 12,
                            "labelPadding": 8,
                            "ticks": false,
                            "titleFontSize": 12,
                            "titlePadding": 10,
                            "titleFont": "Lato",
                            "titleAngle": 0,
                            "titleY": -10,
                            "titleX": 18
                            },


                            "view": {"stroke": "transparent"},

                            "range": {
                            "category": [
                                "#1696d2",
                                "#000000",
                                "#fdbf11",
                                "#ec008b",
                                "#d2d2d2",
                                "#55b748"
                            ]
                            },

                            "line": {"color": "#1696d2", "stroke": "#1696d2", "strokeWidth": 3},


                            "point": {"filled": true},
                            "text": {
                            "color": "#1696d2",
                            "fontSize": 11,
                            "align": "center",
                            "fontWeight": 400,
                            "size": 11
                            }
                        },
                            // "data": {
                            //     "url": "https://gist.githubusercontent.com/mmontesanonyc/6b0aa75affc6a60978f73e11d2f58bb3/raw/e944d335042e3da0c8e99a4df0fbebc8aac4cc15/asthmatrend.csv"
                            // },
                            "data": {
                                "values": trendData,
                            },
                            "width": "container",
                            "height": 550,
                            "encoding": {
                            "x": {
                                "field": "Time",
                                "type": "nominal",
                                "title": "Year"
                            }
                            },
                            "layer": [
                            {
                                "encoding": {
                                "color": {
                                    "field": "Geography",
                                    "type": "nominal",
                                    "legend": {
                                    "orient": "right",
                                    "title": null
                                    }
                                },
                                "y": {
                                    "field": trendMeasure,
                                    "type": "quantitative",
                                    "title": `${trendMeasure} ${trendDisplay && `(${trendDisplay})`} `
                                }
                                },
                                "layer": [
                                {
                                    "mark": {
                                    "type": "line",
                                    "point": {"filled": false, "fill": "white"}
                                    }

                                },
                                {
                                    "transform": [
                                    {
                                        "filter": {
                                        "param": "hover",
                                        "empty": false
                                        }
                                    }
                                    ],
                                    "mark": "point"
                                }
                                ]
                            },
                            {
                                "transform": [
                                {
                                    "pivot": "Geography",
                                    "value": trendMeasure,
                                    "groupby": [
                                    "Time"
                                    ]
                                }
                                ],
                                "mark": "rule",
                                "encoding": {
                                    "opacity": {
                                            "condition": {
                                            "value": 0.3,
                                            "param": "hover",
                                            "empty": false
                                        },
                                        "value": 0
                                    },
                                    "tooltip": [
                                        {
                                            "title": "Year",
                                            "field": "Time",
                                            "type": "nominal"
                                        },
                                        {
                                        "field": "New York City",
                                        "type": "quantitative"
                                        },
                                        {
                                        "field": "Bronx",
                                        "type": "quantitative"
                                        },
                                        {
                                        "field": "Brooklyn",
                                        "type": "quantitative"
                                        },
                                        {
                                        "field": "Manhattan",
                                        "type": "quantitative"
                                        },
                                        {
                                        "field": "Queens",
                                        "type": "quantitative"
                                        },
                                        {
                                        "field": "Staten Island",
                                        "type": "quantitative"
                                        }
                                    ]
                                },
                                "params": [
                                {
                                    "name": "hover",
                                    "select": {
                                    "type": "point",
                                    "fields": [
                                        "Time"
                                    ],
                                    "nearest": true,
                                    "on": "mouseover",
                                    "clear": "mouseout"
                                    }
                                }
                                ]
                            }
                            ]
                        }
                        
                        vegaEmbed("#trend", spec2);
                    }
                        

                    // Render Links Chart using Vegalight
                    const renderLinksChart = (selectedData, selectedMeasure) => {
                        console.log('==========================================================================')
                        console.log('RENDER Links DATA ', )


                        var spec = {
                            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                            "description": "Asthma 5-17 ED visit rate and poverty scatterplot",
                            "width": "container",
                            "height": 400,
                            "config": {
                                "background": "#FFFFFF",
                                "title": {"anchor": "start", "fontSize": 18, "font": "Calibri"},
                                "axisX": {
                                    "domain": true,
                                    "domainColor": "#000000",
                                    "domainWidth": 1,
                                    "grid": false,
                                    "labelFontSize": 12,
                                    "labelAngle": 0,
                                    "tickColor": "#000000",
                                    "tickSize": 5,
                                    "titleFontSize": 12,
                                    "titlePadding": 10,
                                    "title": null
                                },
                                "axisY": {
                                    "domain": false,
                                    "domainWidth": 1,
                                    "grid": true,
                                    "gridColor": "#DEDDDD",
                                    "gridWidth": 1,
                                    "labelFontSize": 12,
                                    "labelPadding": 8,
                                    "ticks": false,
                                    "titleFontSize": 12,
                                    "titlePadding": 10,
                                    "titleFont": "Lato",
                                    "titleAngle": 0,
                                    "titleY": -10,
                                    "titleX": 18,
                                    "title": null
                                },
                                "view": {"stroke": "transparent"},
                                "range": {
                                    "category": [
                                        "#1696d2",
                                        "#000000",
                                        "#fdbf11",
                                        "#ec008b",
                                        "#d2d2d2",
                                        "#55b748"
                                    ]
                                },
                                "text": {
                                    "color": "#1696d2",
                                    "fontSize": 11,
                                    "align": "center",
                                    "fontWeight": 400,
                                    "size": 11
                                }
                            },
                            "data": {"url": "https://gist.githubusercontent.com/mmontesanonyc/436de650b919784691ed42dd321c38f2/raw/074bd84e78473b8a2099e66a0d6bf8caba32b594/scatter-sample-data.csv"},
                            "mark": {"type": "circle", "filled": true, "size": 500, "stroke": "#727272", "strokeWidth": 2},
                                "params": [{
                                    "name": "Borough",
                                    "select": {"type": "point", "fields": ["Borough"]},
                                    "bind": "legend"
                                }
                            ],
                            "encoding": {
                                "y": {"field": "Estimated Annual Rate (per 10,000 residents)", "type": "quantitative"},
                                "x": {"field": "Poverty (percent)", "type": "quantitative"},
                                "tooltip": [{"field": "Geography", "type": "nominal"},
                                {"field": "Estimated Annual Rate (per 10,000 residents)", "type": "quantitative"},
                                {"field": "Poverty (percent)", "type": "quantitative"}
                                ],
                                "color": {
                                    "condition": {
                                    "param": "Borough", "field": "Borough", "type": "nominal"},
                                    "value": "#fafafa"
                                }
                            }
                            }


                            vegaEmbed("#links", spec);

                            var spec2 = {
                                "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                                "description": "Asthma 5-17 ED visit rate and poverty scatterplot",
                                "width": "container",
                                "height": 400,
                                "config": {
                                    "background": "#FFFFFF",
                                    "title": {"anchor": "start", "fontSize": 18, "font": "Calibri"},
                                    "axisX": {
                                    "domain": true,
                                    "domainColor": "#000000",
                                    "domainWidth": 1,
                                    "grid": false,
                                    "labelFontSize": 14,
                                    "labelAngle": 0,
                                    "tickColor": "#000000",
                                    "tickSize": 5,
                                    "titleFontSize": 12,
                                    "titlePadding": 10
                                    },
                                    "axisY": {
                                        "domain": false,
                                        "domainWidth": 1,
                                        "grid": true,
                                        "gridColor": "#DEDDDD",
                                        "gridWidth": 1,
                                        "labelFontSize": 14,
                                        "labelPadding": 8,
                                        "ticks": false,
                                        "titleFontSize": 12,
                                        "titlePadding": 10,
                                        "titleFont": "Lato",
                                        "titleAngle": 0,
                                        "titleY": -10,
                                        "titleX": 80
                                    },
                                    "legend": {
                                        "labelFontSize": 14,
                                        "symbolSize": 140
                                    },
                                    "view": {"stroke": "transparent"},
                                    "range": {
                                        "category": [
                                            "#1696d2",
                                            "#fdbf11",
                                            "#55b748",
                                            "#ec008b",
                                            "#d2d2d2"
                                        ]
                                    },
                                    "text": {
                                    "color": "#1696d2",
                                    "fontSize": 11,
                                    "align": "center",
                                    "fontWeight": 400,
                                    "size": 11
                                    }
                                },
                                "data": {"url": "https://gist.githubusercontent.com/mmontesanonyc/436de650b919784691ed42dd321c38f2/raw/074bd84e78473b8a2099e66a0d6bf8caba32b594/scatter-sample-data.csv"},
                                "mark": {"type": "circle", "filled": true, "size": 500, "stroke": "#727272", "strokeWidth": 2},
                                "params": [
                                    {
                                        "name": "hover",
                                        "select": {"type": "point", "on": "mouseover"}
                                    }
                                ],
                                "encoding": {
                                    "y": {"field": "Estimated Annual Rate (per 10,000 residents)", "type": "quantitative"},
                                    "x": {"field": "Poverty (percent)", "type": "quantitative"},
                                    "tooltip": [{"field": "Geography", "type": "nominal"},
                                    {"field": "Estimated Annual Rate (per 10,000 residents)", "type": "quantitative"},
                                    {"field": "Poverty (percent)", "type": "quantitative"}
                                    ],
                                    "color": {
                                        "field": "Borough", "type": "nominal"
                                    },
                                    "opacity": {
                                        "condition": {
                                        "param": "hover",
                                        "value": 1
                                        },
                                        "value": 0.5
                                    }
                                }
                            }

                            vegaEmbed("#links", spec2);
                    }

                    const updateMapData = (e) => {
                        const measure = e.target.dataset.measure;
                        const date = e.target.dataset.date;
                        const about = e.target.dataset.about;
                        const sources = e.target.dataset.sources;
                        const display = e.target.dataset.display;
                        selectedMapAbout = about;
                        selectedMapSources =  sources;
                        
                        const filteredData = fullDataMapObjects.filter(obj => 
                            obj.Time === date && obj
                        )
                        renderAboutSources(about, sources);
                        renderMap(filteredData, measure, display, date);
                        selectedMapMeasure =  true;
                    }

                    const updateTrendData = (e) => {
                        const measure = e.target.dataset.measure;
                        const disparities = e.target.dataset.disparities;
                        const about = e.target.dataset.about;
                        const sources = e.target.dataset.sources;
                        const display = e.target.dataset.display;
                        selectedTrendAbout = about;
                        selectedTrendSources =  sources;
                        renderAboutSources(about, sources);
                        renderTrendChart(fullDataTrendObjects, measure, display, disparities)
                        selectedTrendMeasure = true
                    }

                    const setDefaultMapMeasure = (defaultArray, visArray) => {
                        console.log('SET DEFAULT MEASURE: ', mapMeasures, trendMeasures, defaultArray)
                        defaultArray.length = 0;

                        const hasAgeAdjustedRate = visArray.filter(measure =>
                            measure.MeasurementType.includes('Age Adjusted Rate')
                        )
                        const hasRate = visArray.filter(measure =>
                            measure.MeasurementType.includes('Rate')
                        )
                        const hasPercent = visArray.filter(measure =>
                            measure.MeasurementType.includes('Percent')
                        )

                        if (hasAgeAdjustedRate.length) {
                            const hasAgeAdjustedRateTotal = hasAgeAdjustedRate.filter(measure => 
                                measure.MeasurementType.includes('Total')
                            )

                            // Set total as default if available
                            if (hasAgeAdjustedRateTotal.length) {
                                defaultArray.push(hasAgeAdjustedRateTotal[0]);
                            } else {
                                defaultArray.push(hasAgeAdjustedRate[0]);
                            }
                            
                        } else if (hasRate.length) {
                            defaultArray.push(hasRate[0]);
                        } else if (hasPercent.length) {
                            defaultArray.push(hasPercent[0]);
                        } else {
                            defaultArray.push(visArray[0]);
                        }
                    }

                    const setDefaultMeasure = (defaultArray, visArray) => {
                        defaultArray.length = 0;

                        if (visArray.length > 0) {
                            const hasAgeAdjustedRate = visArray.filter(measure =>
                                measure.MeasurementType.includes('Age Adjusted Rate')
                            )
                            const hasRate = visArray.filter(measure =>
                                measure.MeasurementType.includes('Rate')
                            )
                            const hasPercent = visArray.filter(measure =>
                                measure.MeasurementType.includes('Percent')
                            )

                            if (hasAgeAdjustedRate.length) {
                                const hasAgeAdjustedRateTotal = hasAgeAdjustedRate.filter(measure => 
                                    measure.MeasurementType.includes('Total')
                                )
                                // Set total as default if available
                                if (hasAgeAdjustedRateTotal.length) {
                                    defaultArray.push(hasAgeAdjustedRateTotal[0]);
                                } else {
                                    defaultArray.push(hasAgeAdjustedRate[0]);
                                }
                                
                            } else if (hasRate.length) {
                                defaultArray.push(hasRate[0]);
                            } else if (hasPercent.length) {
                                defaultArray.push(hasPercent[0]);
                            } else {
                                defaultArray.push(visArray[0]);
                            }
                        }
                        
                    }
                    
                    const loadIndicator = (data) => {
                        let data2 = data
                        selectedSummaryYears = [];
                        selectedSummaryGeography = [];
                        const firstIndicatorId = document.querySelectorAll('#indicator-dropdown button')[0].getAttribute('data-internal-id');
                        const defaultIndicatorId = parseInt(firstIndicatorId);
                        defaultIndicator = false
                        if (!data2) { 
                            data2 = {
                                internal_id: defaultIndicatorId
                            }
                            defaultIndicator = true;
                        }

                        indicator = indicators.find(indicator => indicator.IndicatorID === data2.internal_id)
                        indicatorName = indicator.IndicatorName ? indicator.IndicatorName : data.name;
                        indicatorDesc = indicator.IndicatorDescription ? indicator.IndicatorDescription : `N/A`;
                        indicatorShortName = indicator.IndicatorShortname ? indicator.IndicatorShortname : indicatorName;
                        indicatorMeasurses = indicator.Measures;
                        indicatorId = indicator.IndicatorID;     
                        
                        console.log('==========================================================================')
                        console.log('Load Indicator - IndicatorId: ', indicatorId)
                        console.log('Load Indicator - Indicator: ', indicator)
                        console.log('Load Indicator - Measures: ', indicatorMeasurses)

                        loadData(indicatorId)
                    }

                    const renderMeasures = () => {
                        console.log('==========================================================================')
                        console.log('Render Measures')

                        const contentSummary = document.querySelector('#tab-table');
                        const contentMap = document.querySelector('#tab-map')
                        const contentTrend = document.querySelector('#tab-trend');
                        const contentLinks = document.querySelector('#tab-links');
                        const dropdownTableYear = contentSummary.querySelector('div[aria-labelledby="dropdownTableYear"]');
                        const dropdownMapMeasures = document.querySelector('div[aria-labelledby="dropdownMapMeasures"]');
                        const dropdownMapYear = contentMap.querySelector('div[aria-labelledby="dropdownMapYear"]');
                        const dropdownTableGeo = contentSummary.querySelector('div[aria-labelledby="dropdownTableGeo"]');
                        const dropdownTrendMeasures = contentTrend.querySelector('div[aria-labelledby="dropdownTrendMeasures"]');
                        const dropdownLinksMeasures = contentLinks.querySelector('div[aria-labelledby="dropdownLinksMeasures"]');
                        const tableGeoTypes =  [...new Set(joinedAqData.objects().map(item => item.GeoType))];
                        const tableYears =  [...new Set(joinedAqData.objects().map(item => item.Time))];
                        const mapYears =  [...new Set(fullDataMapObjects.map(item => item.Time))];

                        // clear Measure Dropdowns
                        dropdownTableYear.innerHTML = ``;
                        dropdownTableGeo.innerHTML = ``;
                        dropdownMapMeasures.innerHTML = ``;
                        dropdownTrendMeasures.innerHTML = ``;
                        dropdownLinksMeasures.innerHTML = ``;

                        mapMeasures.length = 0;
                        trendMeasures.length = 0;

                        tableYears.forEach((year, index) => {
                            if (index === 0) {
                                selectedSummaryYears.push(year);
                                dropdownTableYear.innerHTML += `<label class="dropdown-item checkbox-year"><input type="checkbox" value="${year}" checked /> ${year}</label>`;
                            } else {
                                dropdownTableYear.innerHTML += `<label class="dropdown-item checkbox-year"><input type="checkbox" value="${year}" /> ${year}</label>`;
                            }
                        });

                        tableGeoTypes.forEach((geoType, index) => {
                            selectedSummaryGeography.push(geoType);
                            dropdownTableGeo.innerHTML += `<label class="dropdown-item checkbox-geo"><input type="checkbox" value="${geoType}" checked /> ${geoType}</label>`;
                        });

                        indicatorMeasurses.map((measure, index) => {
                            const type = measure?.MeasurementType;
                            const displayType = measure?.DisplayType;
                            const years = measure?.AvailableTimes.sort((a, b) => b.start_period - a.start_period);
                            const geography = measure?.AvailableGeographyTypes;
                            const links = measure?.VisOptions[0].Links && measure?.VisOptions[0]?.Links[0];
                            const map = measure?.VisOptions[0].Map && measure?.VisOptions[0].Map[0]?.On;
                            const trend = measure?.VisOptions[0].Trend && measure?.VisOptions[0].Trend[0]?.On;
                            const trendDisparities = measure?.VisOptions[0].Trend && measure?.VisOptions[0].Trend[0]?.Disparities;
                            const about = measure.how_calculated;
                            const sources = measure.Sources;

                            if (map === 1) {
                                mapMeasures.push(measure)
                                dropdownMapMeasures.innerHTML += `<div class="dropdown-title"><strong> ${type}</strong></div>`;
                                mapYears.map((time, index) => {
                                    dropdownMapMeasures.innerHTML += `<button class="dropdown-item link-measure" data-measure="${type}" data-display="${displayType}" data-date="${time}" data-about="${about}" data-sources="${sources}"> ${time}</button>`
                                })
                            }

                            if (trend === 1) {
                                trendMeasures.push(measure)
                                if  (fullDataTrendObjects) {
                                    dropdownTrendMeasures.innerHTML += `<button class="dropdown-item link-measure" data-measure="${type}" data-display="${displayType}" data-about="${about}" data-sources="${sources}" data-disparities="${trendDisparities}"> ${type}</button>`;
                                }
                            }

                            if (links) {
                                linksMeasures.push(measure)
                                if  (fullDataTrendObjects) {
                                    const linkYears =  [...new Set(fullDataTrendObjects.map(item => item.Time))]
                                    dropdownLinksMeasures.innerHTML += `<button class="dropdown-item link-measure" data-measure="${type}" data-display="${displayType}" data-date="${years[index].TimeDescription}"  data-about="${about}" data-sources="${sources}" data-datestart="${years[index].start_period}" data-dateend="${years[index].end_period}"> ${type}</button>`;
                                }
                            }
                        })

                        setDefaultMapMeasure(defaultMapMeasure, mapMeasures);
                        setDefaultMeasure(defaultTrendMeasure, trendMeasures);

                        // disable tabs if there are no measures

                        const tabMapSelected = tabMap.getAttribute('aria-selected');
                        const tabTrendSelected = tabTrend.getAttribute('aria-selected');
                        const tabLinksSelected = tabLinks.getAttribute('aria-selected');

                        const disableLink = (el) => {
                            el.classList.add('disabled');
                            el.setAttribute('aria-disabled', true);
                        }

                        const enableLink = (el) => {
                            el.classList.remove('disabled');
                            el.setAttribute('aria-disabled', false);
                        }

                        if (mapMeasures.length === 0) {
                            disableLink(tabMap);
                            if (tabMapSelected === true) {
                                $('#tab-btn-table').tab('show');
                            }
                        } else {
                            enableLink(tabMap);
                            renderMap();
                        }

                        if (trendMeasures.length === 0) {
                            disableLink(tabTrend);
                            if (tabTrendSelected === true) {
                                $('#tab-btn-table').tab('show');
                            }
                        } else {
                            enableLink(tabTrend);
                            renderTrendChart();
                        }

                        if (linksMeasures.length === 0) {
                            disableLink(tabLinks);
                            if (tabLinksSelected) {
                                $('#tab-btn-table').tab('show');
                            }
                        } else {
                            enableLink(tabLinks);
                            renderLinksChart();
                        }

                        renderTable();
                        renderTitleDescription(indicatorShortName, indicatorDesc);
                        renderAboutSources(measureAbout, measureSources);

                        const mapMeasuresLinks = document.querySelectorAll('#tab-map .link-measure');
                        const trendMeasuresLinks = document.querySelectorAll('#tab-trend .link-measure');

                        mapMeasuresLinks.forEach(link => {
                            link.addEventListener('click', e => updateMapData(e));
                        })
                        
                        trendMeasuresLinks.forEach(link => {
                            link.addEventListener('click', e => updateTrendData(e));
                        })
                        

                        const checkboxYear = document.querySelectorAll('.checkbox-year');
                        const checkboxGeo = document.querySelectorAll('.checkbox-geo');

                        checkboxYear.forEach(checkbox => {
                            handleYearFilter(checkbox, indicatorId);
                        })
                        checkboxGeo.forEach(checkbox => {
                            handleGeoFilter(checkbox, indicatorId);
                        })

                        // Render default Measure About and Sources
                        if (defaultIndicator) {
                            measureAbout = '';
                            measureSources = '';
                            indicatorMeasurses.map(measure => {
                                measureAbout += `<h6>${measure.MeasurementType}</h5>${measure.how_calculated}`;
                                measureSources += `<h6>${measure.MeasurementType}</h5><p>${measure.Sources}</p>`;
                            })
                            
                            renderAboutSources(measureAbout, measureSources);
                        }
                    }


            </script>

            <div class="row">
                <div class="col-md-4">
                    <div class="card fs-sm mb-2">
                        
                        <div id="truncate" class="text-truncate">
                            <p>Air pollution is an important environmental threat to the health of New York City residents. Exposures to two common air pollutants, <a href="http://www.nyc.gov/html/doh/html/environmental/tracking-glossary.shtml">fine particulate matter (PM2.5)</a> and <a href="http://www.nyc.gov/html/doh/html/environmental/tracking-glossary.shtml">ozone (O3)</a>, can worsen respiratory illness and heart conditions and contribute to premature deaths. Older adults, children and people with existing heart and lung disease are </p>
                        </div>

                        
                        <div id="full">
                            <p>Air pollution is an important environmental threat to the health of New York City residents. Exposures to two common air pollutants, <a href="http://www.nyc.gov/html/doh/html/environmental/tracking-glossary.shtml">fine particulate matter (PM2.5)</a> and <a href="http://www.nyc.gov/html/doh/html/environmental/tracking-glossary.shtml">ozone (O3)</a>, can worsen respiratory illness and heart conditions and contribute to premature deaths. Older adults, children and people with existing heart and lung disease are especially affected. This site provides estimates of the impact of air pollution on the health of NYC residents as measured by the numbers of emergency department visits, hospitalizations, and deaths attributable to PM2.5 and ozone.</p>
<h3 id="about-pm25-ozone-and-health">About PM2.5, Ozone and Health</h3>
<p>Fine particulate matter, also known as (PM2.5), are small airborne particles that can be inhaled deep into the lungs. Major sources of PM2.5 include trucks, buses and cars, and the burning of fossil fuel to generate electric power and heat buildings. Exposure to particulate matter has been linked to breathing problems, reduced lung function, heart disease and premature death. Ozone, also called smog, causes irritation and inflammation of the lungs and worsening of asthma.</p>
<h3 id="about-the-data-and-indicators">About the Data and Indicators</h3>
<p>PM2.5 and ozone attributable health events are estimated using well established health impact methods often used to estimate the changes in the number of illnesses and deaths that could occur in a population if air pollution concentrations were reduced by a specified amount. This method:</p>
<ul>
<li>Uses air quality monitoring data from EPAs <a href="http://www.epa.gov/ttn/airs/airsaqs/">Air Quality System</a> to characterize current or baseline air pollution levels</li>
<li>Specifies comparison of air quality conditions, such as background levels of air pollution without any man-made emissions, also called modeled natural background level</li>
<li>Computes change in air pollution levels as the difference between the current level and the comparison level for each neighborhood</li>
<li>Uses the change in air pollution levels, <a href="http://www.nyc.gov/html/doh/html/environmental/tracking-glossary.shtml">concentration-response functions</a> from epidemiological studies, and information about the local population and baseline emergency room visits, hospitalization and death rates to calculate the health impact associated with the change in air quality in each neighborhood.</li>
</ul>
<p>See <a href="http://www.nyc.gov/html/doh/downloads/pdf/eode/eode-air-quality-impact.pdf">report</a> for detailed descriptions of health impact methodologies.</p>
<h3 id="prevention">Prevention</h3>
<p>To help improve air quality and reduce the risk of health effects from air pollution:</p>
<ul>
<li>Choose a cleaner commute - walk, bike or use mass transit instead of a car, especially during rush hour.</li>
<li>Support policies that promote public transportation and energy conservation.</li>
<li>Spend less time outdoors and in strenuous physical activity on poor air quality days. Avoid being outdoors in the middle of the day when pollution levels are highest.</li>
<li>Know how sensitive you are to air pollution, and plan outdoor activities when and where pollution levels are lower. Local TV and radio stations report air quality forecasts, and you can track the <a href="http://www.dec.ny.gov/cfmx/extapps/aqi/aqi_forecast.cfm" title="Air Quality Index">Air Quality Index</a>.</li>
</ul>
<h3 id="key-messages">Key Messages</h3>
<p>Air pollution is an important environmental threat to the health of New York City residents, even small improvements in air quality can lead to large public health benefits. Many contributors to poor air quality in NYC are targeted for improvements in the City&rsquo;s long-term planning and sustainability plan, <a href="http://www1.nyc.gov/html/onenyc/visions/sustainability/goal-3.html" title="OneNYC Air Quality ">OneNYC Air Quality</a>. Continuing and expanding these and other efforts at the State and Federal level can result in large benefits to the health of New York City residents.</p>

                        </div>
                        <p>

                        
                        <button class="btn-sm btn-outline-secondary float-right" onclick="reveal()" id="contenttoggle">Show more...<i class="fas fa-caret-square-down" aria-hidden="true"></i></button>
                    </div>
                </div>

                <div class="col-md-8">
                    <div class="dropdown float-right">
                        <button class="btn btn-outline-primary float-right dropdown-toggle" type="button" id="dropdownTableYear" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="text-align:right!important">
                          More Health Impacts of Air Pollution data
                        </button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownTableYear" id="indicator-dropdown">
                        
                            <button class="dropdown-item" onClick="loadIndicator({&#34;URL&#34;:&#34;https://a816-dohbesp.nyc.gov/IndicatorPublic/VisualizationData.aspx?id=2122,719b87,103,Summarize&#34;,&#34;internal_id&#34;:2122,&#34;name&#34;:&#34;O3-Attributable Asthma Emergency Department Visits&#34;,&#34;subtopic_id&#34;:103})" data-internal-id="2122">O3-Attributable Asthma Emergency Department Visits</button>
                            
                        
                            <button class="dropdown-item" onClick="loadIndicator({&#34;URL&#34;:&#34;https://a816-dohbesp.nyc.gov/IndicatorPublic/VisualizationData.aspx?id=2124,719b87,103,Summarize&#34;,&#34;internal_id&#34;:2124,&#34;name&#34;:&#34;O3-Attributable Asthma Hospitalizations &#34;,&#34;subtopic_id&#34;:103})" data-internal-id="2124">O3-Attributable Asthma Hospitalizations </button>
                            
                        
                            <button class="dropdown-item" onClick="loadIndicator({&#34;URL&#34;:&#34;https://a816-dohbesp.nyc.gov/IndicatorPublic/VisualizationData.aspx?id=2121,719b87,103,Summarize&#34;,&#34;internal_id&#34;:2121,&#34;name&#34;:&#34;O3-Attributable Cardiac and Respiratory Deaths &#34;,&#34;subtopic_id&#34;:103})" data-internal-id="2121">O3-Attributable Cardiac and Respiratory Deaths </button>
                            
                        
                            <button class="dropdown-item" onClick="loadIndicator({&#34;URL&#34;:&#34;https://a816-dohbesp.nyc.gov/IndicatorPublic/VisualizationData.aspx?id=2117,719b87,103,Summarize&#34;,&#34;internal_id&#34;:2117,&#34;name&#34;:&#34;PM2.5-Attributable Asthma Emergency Department Visits &#34;,&#34;subtopic_id&#34;:103})" data-internal-id="2117">PM2.5-Attributable Asthma Emergency Department Visits </button>
                            
                        
                            <button class="dropdown-item" onClick="loadIndicator({&#34;URL&#34;:&#34;https://a816-dohbesp.nyc.gov/IndicatorPublic/VisualizationData.aspx?id=2120,719b87,103,Summarize&#34;,&#34;internal_id&#34;:2120,&#34;name&#34;:&#34;PM2.5-Attributable Cardiovascular Hospitalizations (Adults 40 Yrs and Older) &#34;,&#34;subtopic_id&#34;:103})" data-internal-id="2120">PM2.5-Attributable Cardiovascular Hospitalizations (Adults 40 Yrs and Older) </button>
                            
                        
                            <button class="dropdown-item" onClick="loadIndicator({&#34;URL&#34;:&#34;https://a816-dohbesp.nyc.gov/IndicatorPublic/VisualizationData.aspx?id=2108,719b87,103,Summarize&#34;,&#34;internal_id&#34;:2108,&#34;name&#34;:&#34;PM2.5-Attributable Deaths &#34;,&#34;subtopic_id&#34;:103})" data-internal-id="2108">PM2.5-Attributable Deaths </button>
                            
                        
                            <button class="dropdown-item" onClick="loadIndicator({&#34;URL&#34;:&#34;https://a816-dohbesp.nyc.gov/IndicatorPublic/VisualizationData.aspx?id=2119,719b87,103,Summarize&#34;,&#34;internal_id&#34;:2119,&#34;name&#34;:&#34;PM2.5-Attributable Respiratory Hospitalizations (Adults 20 Yrs and Older)&#34;,&#34;subtopic_id&#34;:103})" data-internal-id="2119">PM2.5-Attributable Respiratory Hospitalizations (Adults 20 Yrs and Older)</button>
                            
                        
                        </div>
                    </div>
                    <h3 class="indicator-title">O3-Attributable Asthma Emergency Department Visits</h3>


                    <div style="clear:both" class="my-3">
                        <p class="fs-sm indicator-description"><strong>Indicator description:</strong></p>
                    </div>

                    <div class="nav nav-pills bg-white device-sm" role="tablist">

                        <a class="nav-item nav-link flex-fill active" id="tab-btn-table" href="#tab-table"
                            data-toggle="pill" aria-controls="tab-table" aria-selected="true" role="tab">
                            <i class="fas fa-list h4 fa-fw"></i><div class="d-none d-lg-block">Summary</div>
                        </a>
                    
                        <a class="nav-item nav-link flex-fill" id="tab-btn-map" href="#tab-map"
                            data-toggle="pill" aria-controls="tab-map" aria-selected="false" role="tab">
                            <i class="fas fa-map-marker-alt h4 fa-fw"></i><div class="d-none d-lg-block">Map</div>
                        </a>
                    
                        <a class="nav-item nav-link flex-fill" id="tab-btn-trend" href="#tab-trend"
                            data-toggle="pill" aria-controls="tab-trend" aria-selected="false" role="tab">
                            <i class="fas fa-chart-line h4 fa-fw"></i><div class="d-none d-lg-block">Trend</div>
                        </a>


                        <a class="nav-item nav-link flex-fill" id="tab-btn-links" href="#tab-links"
                            data-toggle="pill" aria-controls="tab-links" aria-selected="false" aria-disabled="true" role="tab">
                            <i class="fas fa-link h4 fa-fw"></i><div class="d-none d-lg-block">Links</div>
                        </a>
                    
                    </div>
                    
                    <div class="tab-content bg-white mb-4" id="tabs-01-content">
                        
                        <div class="tab-pane fade show active py-2" id="tab-table" aria-labelledby="tab-btn-table" role="tabpanel">
                            <div class="float right">
                                <div class="dropdown">
                                    <button class="btn btn-sm float-right btn-outline-success dropdown-toggle" type="button" id="dropdownTableYear" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Select year
                                    </button>
                                    <div class="dropdown-menu" aria-labelledby="dropdownTableYear">
                                        
                                    </div>
                                </div>

                                <div class="dropdown">
                                    <button class="btn btn-sm mr-1 float-right btn-outline-success dropdown-toggle" type="button" id="dropdownTableGeo" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Select geography
                                    </button>
                                    <div class="dropdown-menu" aria-labelledby="dropdownTableGeo">
                                        
                                    </div>
                                </div>
                            </div>
                            <div id="summary-table" class="border mt-4">
                                
                            </div>
                        </div> 
                        
                        <div class="tab-pane fade py-2" id="tab-map" aria-labelledby="tab-btn-map" role="tabpanel">
                            <div class="float right">
                                <div class="dropdown">
                                    <button class="btn btn-sm mr-1 float-right btn-outline-success dropdown-toggle" type="button" id="dropdownMapMeasures" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Select measure
                                    </button>
                                    <div class="dropdown-menu" aria-labelledby="dropdownMapMeasures">
                                        
                                    </div>
                                </div>
                            </div>
                            <div class="border mt-4">
                                <div id="map" width=600 height=500 style="width: 100%; min-height: 450px; margin-bottom: 50px;"></div>
                            </div>                        
                        </div>
                        
                        <div class="tab-pane fade py-2" id="tab-trend" aria-labelledby="tab-btn-trend" role="tabpanel">
                            <div class="dropdown float-right">
                                <button class="btn btn-sm float-right btn-outline-success dropdown-toggle" type="button" id="dropdownTrendMeasures" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Choose measure
                                </button>
                                <div class="dropdown-menu" aria-labelledby="dropdownTrendMeasures">
                                  
                                </div>
                            </div>
                            <div class="border mt-4">
                                
                                <div id="trend" style="width: 100%"></div>
                            </div>
                        </div>
                        
                        <div class="tab-pane fade py-2" id="tab-links" aria-labelledby="tab-btn-links" role="tabpanel">
                            <div class="dropdown float-right">
                                <button class="btn btn-sm float-right btn-outline-success dropdown-toggle" type="button" id="dropdownLinksMeasures" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Select data to link
                                </button>
                                <div class="dropdown-menu" aria-labelledby="dropdownLinksMeasures">
                                    
                                </div>
                            </div>
                            <div class="border mt-4" style="height: 550px; clear: both">
                                
                                <div id="links" style="width: 100%"></div>
                            </div>
                        </div>
                    </div>

                    <hr class="my-2">
                    <div class="row">
                        <div class="col-6">
                            <h4 class="fs-rg">About the measures</h4>
                            <p class="fs-sm indicator-measures">Insert from `How_Calculated.` Vivamus consequat id nibh et tempor. Cras augue enim, iaculis quis purus sit amet, interdum accumsan neque. In blandit varius blandit. Praesent vel leo ac urna dapibus faucibus. Donec sed luctus neque. Nulla porta finibus elit, luctus eleifend felis ornare vitae. Ut consequat laoreet libero eu venenatis.</p>
                        </div>
                        <div class="col-6">
                            <h4 class="fs-rg">Data sources</h4>
                            <p class="fs-sm indicator-sources">Insert from `Sources.` Pellentesque blandit ante vel augue mattis, lacinia tincidunt velit feugiat. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Donec nulla nisl, sollicitudin et volutpat at, finibus ac quam. Pellentesque faucibus turpis egestas tellus luctus, nec porttitor diam bibendum. Sed mauris augue, tempus id urna sit amet, hendrerit blandit libero. Cras sit amet luctus nunc, nec mattis leo. </p>

                        </div>
                    </div>
                    
                    <hr class="my-2">

                    <div class="row mb-4">
                        <div class="col">
                            <h4>Related:</h4>
                            <p>Insert related content via partial, here.</p>
                        </div>
                    </div>


            
                </div>
            </div>

        </div>
    </div>

                    <div style="clear:both" class="my-3">
                        <p class="fs-sm indicator-description"><strong>Indicator description:</strong></p>
                    </div>


                    <div class="nav nav-pills bg-white device-sm" role="tablist">

                        <a class="nav-item nav-link flex-fill active" id="tab-btn-table" href="#tab-table"
                            data-toggle="pill" aria-controls="tab-table" aria-selected="true" role="tab">
                            <i class="fas fa-list h4 fa-fw"></i><div class="d-none d-lg-block">Summary</div>
                        </a>
                    
                        <a class="nav-item nav-link flex-fill" id="tab-btn-map" href="#tab-map"
                            data-toggle="pill" aria-controls="tab-map" aria-selected="false" role="tab">
                            <i class="fas fa-map-marker-alt h4 fa-fw"></i><div class="d-none d-lg-block">Map</div>
                        </a>
                    
                        <a class="nav-item nav-link flex-fill" id="tab-btn-trend" href="#tab-trend"
                            data-toggle="pill" aria-controls="tab-trend" aria-selected="false" role="tab">
                            <i class="fas fa-chart-line h4 fa-fw"></i><div class="d-none d-lg-block">Trend</div>
                        </a>


                        <a class="nav-item nav-link flex-fill" id="tab-btn-links" href="#tab-links"
                            data-toggle="pill" aria-controls="tab-links" aria-selected="false" aria-disabled="true" role="tab">
                            <i class="fas fa-link h4 fa-fw"></i><div class="d-none d-lg-block">Links</div>
                        </a>
                    
                    </div>
                    
                    <div class="tab-content bg-white mb-4" id="tabs-01-content">
                        
                        <div class="tab-pane fade show active py-2" id="tab-table" aria-labelledby="tab-btn-table" role="tabpanel">
                            <div class="float right">
                                <div class="dropdown">
                                    <button class="btn btn-sm float-right btn-outline-success dropdown-toggle" type="button" id="dropdownTableYear" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Select year
                                    </button>
                                    <div class="dropdown-menu" aria-labelledby="dropdownTableYear">
                                        
                                    </div>
                                </div>

                                <div class="dropdown">
                                    <button class="btn btn-sm mr-1 float-right btn-outline-success dropdown-toggle" type="button" id="dropdownTableGeo" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Select geography
                                    </button>
                                    <div class="dropdown-menu" aria-labelledby="dropdownTableGeo">
                                        
                                    </div>
                                </div>
                            </div>
                            <div id="summary-table" class="border mt-4">
                                
                            </div>
                        </div> 
                        
                        <div class="tab-pane fade py-2" id="tab-map" aria-labelledby="tab-btn-map" role="tabpanel">
                            <div class="float right">
                                <div class="dropdown">
                                    <button class="btn btn-sm mr-1 float-right btn-outline-success dropdown-toggle" type="button" id="dropdownMapMeasures" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Select measure
                                    </button>
                                    <div class="dropdown-menu" aria-labelledby="dropdownMapMeasures">
                                        
                                    </div>
                                </div>
                            </div>
                            <div class="border mt-4">
                                <div id="map" width=600 height=500 style="width: 100%; min-height: 450px; margin-bottom: 50px;"></div>
                            </div>                        
                        </div>
                        
                        <div class="tab-pane fade py-2" id="tab-trend" aria-labelledby="tab-btn-trend" role="tabpanel">
                            <div class="dropdown float-right">
                                <button class="btn btn-sm float-right btn-outline-success dropdown-toggle" type="button" id="dropdownTrendMeasures" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Choose measure
                                </button>
                                <div class="dropdown-menu" aria-labelledby="dropdownTrendMeasures">
                                  
                                </div>
                            </div>
                            <div class="border mt-4">
                                
                                <div id="trend" style="width: 100%"></div>
                            </div>
                        </div>
                        
                        <div class="tab-pane fade py-2" id="tab-links" aria-labelledby="tab-btn-links" role="tabpanel">
                            <div class="dropdown float-right">
                                <button class="btn btn-sm float-right btn-outline-success dropdown-toggle" type="button" id="dropdownLinksMeasures" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Select data to link
                                </button>
                                <div class="dropdown-menu" aria-labelledby="dropdownLinksMeasures">
                                    
                                </div>
                            </div>
                            <div class="border mt-4" style="height: 550px; clear: both">
                                
                                <div id="links" style="width: 100%"></div>
                            </div>
                        </div>
                    </div>

                    <hr class="my-2">
                    <div class="row">
                        <div class="col-6">
                            <h4 class="fs-rg">About the measures</h4>
                            <p class="fs-sm indicator-measures">Insert from `How_Calculated.` Vivamus consequat id nibh et tempor. Cras augue enim, iaculis quis purus sit amet, interdum accumsan neque. In blandit varius blandit. Praesent vel leo ac urna dapibus faucibus. Donec sed luctus neque. Nulla porta finibus elit, luctus eleifend felis ornare vitae. Ut consequat laoreet libero eu venenatis.</p>
                        </div>
                        <div class="col-6">
                            <h4 class="fs-rg">Data sources</h4>
                            <p class="fs-sm indicator-sources">Insert from `Sources.` Pellentesque blandit ante vel augue mattis, lacinia tincidunt velit feugiat. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Donec nulla nisl, sollicitudin et volutpat at, finibus ac quam. Pellentesque faucibus turpis egestas tellus luctus, nec porttitor diam bibendum. Sed mauris augue, tempus id urna sit amet, hendrerit blandit libero. Cras sit amet luctus nunc, nec mattis leo. </p>

                        </div>
                    </div>
                    
                    <hr class="my-2">

                    <div class="row mb-4">
                        <div class="col">
                            <h4>Related:</h4>
                            <p>Insert related content via partial, here.</p>
                        </div>
                    </div>


            
                </div>
            </div>

        </div>
    </div>



</article>



<script type="text/javascript" src="https://nycehs.github.io/ehs-data-portal-frontend-temp/js/accessible-autocomplete.min.js" integrity=""></script>

<script type="text/javascript"> 
    
    function populateDropDownList() {          
           var ddlData = document.getElementById("all-data");
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Data Explorer"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Active Design"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/active-design\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Air Quality"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/air-quality\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Alcohol Access"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/alcohol-access\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Alcohol Use"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/alcohol-use\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "All Data Sets"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/all-data\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Asthma"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/asthma\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Bed Bugs"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/bed-bugs\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Birth Defects"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/birth-defects\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Birth Outcomes"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/birth-outcomes\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Cancer"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/cancer\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Cancers in Children"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/cancers-in-children\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Carbon Monoxide Incidents"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/carbon-monoxide-incidents\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Carbon Monoxide Poisoning"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/carbon-monoxide-poisoning\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Childhood Lead Exposure"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/childhood-lead-exposure\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Chronic Obstructive Pulmonary Disease"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/chronic-obstructive-pulmonary-disease\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Cigarette Smoke"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/cigarette-smoke\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Climate"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/climate\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Climate Change"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/climate-change\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Cockroaches"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/cockroaches\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Drinking Water Quality"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/drinking-water-quality\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Energy"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/energy\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Falls Among Older Adults"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/falls-among-older-adults\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Health Care"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/health-care\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Health Impacts of Air Pollution"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/health-impacts-of-air-pollution\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Heart Attacks"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/heart-attacks\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Housing"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/housing\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Housing and Neighborhoods"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/housing-and-neighborhoods\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Large City Air Quality Comparison"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/large-city-air-quality-comparison\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Lead Hazards"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/lead-hazards\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Mice and Rats"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/mice-and-rats\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Mortality"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/mortality\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Noise"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/noise\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Overweight"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/overweight\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Parks and Public Space"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/parks-and-public-space\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Pesticides"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/pesticides\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Physical Activity"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/physical-activity\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Restaurant Food Safety"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/restaurant-food-safety\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Social and Economic Conditions"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/social-and-economic-conditions\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Solid Waste"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/solid-waste\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Sugary Drink Consumption"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/sugary-drink-consumption\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Traffic"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/traffic\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Transportation"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/transportation\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Transportation-related Injuries"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/transportation-related-injuries\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Vector-borne Disease"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/vector-borne-disease\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Violence"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/violence\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Walking, Driving, and Cycling"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/walking-driving-and-cycling\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Water Supply"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/water-supply\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Waterways"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/waterways\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Weather-Related Illness"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/weather-related-illness\/'
            
            ddlData.options.add(option);
           
            var option = document.createElement("OPTION");
            
            option.innerHTML = "Worker Health"
            
            option.value = '\/ehs-data-portal-frontend-temp/\/data-explorer\/worker-health\/'
            
            ddlData.options.add(option);
          
       };

       populateDropDownList(); 

       
       var selectEl = document.querySelector('#all-data')
        accessibleAutocomplete.enhanceSelectElement({
        autoselect: true,
        confirmOnBlur: true,
        defaultValue: "",
        minLength: 2,
        selectElement: selectEl
            });


    
    var dataSearchForm = document.getElementById('all-data-select') 
    document.querySelector('form.autocomplete-form').addEventListener("submit", function (e) {
        e.preventDefault(); 
        window.location.assign(dataSearchForm.options[dataSearchForm.selectedIndex].value)
      });



   </script>


      <ul id="results"></ul>
    </main><footer class="bg-black" id="global-footer" role="contentinfo">

  <h2 class="sr-only">
      Page Footer
  </h2>

  <div class="bg-opacity-black-25 text-white" id="nyc-footer">

      <div class="container py-3 d-none" id="languages">

          <div class="row fs-md">

              <div class="col-6 col-md-4 col-lg mb-2 mb-lg-0">
                  <ul class="extensible-list">
                      <li><a class="lang-select text-reset" href="#" data-lang="ar"></a></li>
                      <li><a class="lang-select text-reset" href="#" data-lang="bn"></a></li>
                  </ul>
              </div>
              <div class="col-6 col-md-4 col-lg mb-2 mb-lg-0">
                  <ul class="extensible-list">
                      <li><a class="lang-select text-reset" href="#" data-lang="zh-CN"></a></li>
                      <li><a class="lang-select text-reset" href="#" data-lang="fr">franais</a></li>
                  </ul>
              </div>
              <div class="col-6 col-md-4 col-lg mb-2 mb-lg-0">
                  <ul class="extensible-list">
                      <li><a class="lang-select text-reset" href="#" data-lang="ht">Kreyl Ayisyen</a></li>
                      <li><a class="lang-select text-reset" href="#" data-lang="ko"></a></li>
                  </ul>
              </div>
              <div class="col-6 col-md-4 col-lg mb-2 mb-lg-0">
                  <ul class="extensible-list">
                      <li><a class="lang-select text-reset" href="#" data-lang="pl">Polskie</a></li>
                      <li><a class="lang-select text-reset" href="#" data-lang="ru"></a></li>
                  </ul>
              </div>
              <div class="col-6 col-md-4 col-lg">
                  <ul class="extensible-list">
                      <li><a class="lang-select text-reset" href="#" data-lang="es">Espaol</a></li>
                      <li><a class="lang-select text-reset" href="#" data-lang="ur"></a></li>
                  </ul>
              </div>
          </div>

      </div>
      

      <div class="container py-3" id="languages">

          <ul class="fs-md" role="list">
              <li><a class="lang-select text-reset" href="#" data-lang="ar"></a></li>
              <li><a class="lang-select text-reset" href="#" data-lang="bn"></a></li>
              <li><a class="lang-select text-reset" href="#" data-lang="zh-CN"></a></li>
              <li><a class="lang-select text-reset" href="#" data-lang="fr">franais</a></li>
              <li><a class="lang-select text-reset" href="#" data-lang="ht">Kreyl Ayisyen</a></li>
              <li><a class="lang-select text-reset" href="#" data-lang="ko"></a></li>
              <li><a class="lang-select text-reset" href="#" data-lang="pl">Polskie</a></li>
              <li><a class="lang-select text-reset" href="#" data-lang="ru"></a></li>
              <li><a class="lang-select text-reset" href="#" data-lang="es">Espaol</a></li>
              <li><a class="lang-select text-reset" href="#" data-lang="ur"></a></li>
          </ul>

      </div>
      

      <hr class="opacity-10" aria-hidden="true">

      <div class="container py-3">

          <div class="row">

              <div class="col-md-6 col-lg-8 mb-3 mb-lg-0">

                  <nav class="row fs-md" role="navigation">

                      <div class="col-lg mb-3 mb-lg-0">

                          <ul class="extensible-list">
                              <li>
                                  <a class="text-reset" href="https://www1.nyc.gov/nyc-resources/agencies.page">
                                      <strong>City Agencies</strong>
                                  </a>
                              </li>
                              <li>
                                  <a class="text-reset" href="https://a858-nycnotify.nyc.gov/notifynyc/">
                                      <strong>Notify NYC</strong>
                                  </a>
                              </li>
                              <li>
                                  <a class="text-reset"
                                      href="https://www1.nyc.gov/connect/mobile-applications.page">
                                      <strong>NYC Mobile Apps</strong>
                                  </a>
                              </li>
                          </ul>
                      </div>
                      

                      <div class="col-lg mb-3 mb-lg-0">

                          <ul class="extensible-list">
                              <li>
                                  <a class="text-reset" href="https://www1.nyc.gov/home/contact-us.page">
                                      <strong>Contact NYC Government</strong>
                                  </a>
                              </li>
                              <li>
                                  <a class="text-reset" href="https://a856-citystore.nyc.gov/">
                                      <strong>CityStore</strong>
                                  </a>
                              </li>
                              <li>
                                  <a class="text-reset" href="https://maps.nyc.gov/doitt/nycitymap/">
                                      <strong>Maps</strong>
                                  </a>
                              </li>
                          </ul>

                      </div>
                      

                      <div class="col-lg mb-3 mb-lg-0">

                          <ul class="extensible-list">
                              <li>
                                  <a class="text-reset"
                                      href="https://a127-ess.nyc.gov/psp/prdess/?cmd=login&languageCd=ENG&">
                                      <strong>City Employees</strong>
                                  </a>
                              </li>
                              <li>
                                  <a class="text-reset" href="https://www1.nyc.gov/connect/social-media.page">
                                      <strong>Stay Connected</strong>
                                  </a>
                              </li>
                              <li>
                                  <a class="text-reset"
                                      href="https://www1.nyc.gov/nyc-resources/resident-toolkit.page">
                                      <strong>Resident Toolkit</strong>
                                  </a>
                              </li>
                          </ul>

                      </div>
                      

                  </nav>

              </div>
              

              <div class="col-md-6 col-lg-4">

                  <a class="mb-2" href="https://www1.nyc.gov" title="Go to nyc.gov" target="_blank">
                      
                      <img class="mb-2" src="https://nycehs.github.io/ehs-data-portal-frontend-temp/images/nyc-bubble-logo.svg" width="90" alt="NYC Logo">
                      <span class="sr-only">(opens in a new tab)</span>
                  </a>
                  <p class="fs-sm">City of New York - 2019 All Rights Reserved. NYC is a trademark and service
                      mark of the City of New York.</p>

                  <ul class="extensible-list horizontal fs-sm">
                      <li>
                          <a class="text-reset" href="https://www1.nyc.gov/home/privacy-policy.page">Privacy
                              Policy</a>
                      </li>
                      <li>
                          <a class="text-reset" href="https://www1.nyc.gov/home/terms-of-use.page">Terms
                              of Use</a>
                      </li>
                      <li>
                          <a class="text-reset" href="https://www1.nyc.gov/site/mopd/index.page"
                              title="Mayor's Office for People with Disabilities">
                              <span class="sr-only">Mayor's Office for People with Disabilities</span>
                              <span class="fab fa-lg fa-accessible-icon"></span>
                          </a>
                      </li>
                  </ul>

              </div>
              

          </div>
          

      </div>
      

  </div>
  

</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>


<script>
  function googleTranslateElementInit() {
      new google.translate.TranslateElement({
          pageLanguage: 'en'
      }, 'google_translate_element');
  }
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script src="https://unpkg.com/lunr/lunr.js"></script>
<script src="https://unpkg.com/lunr/lunr.js"></script>

<script type="text/javascript" src="https://nycehs.github.io/ehs-data-portal-frontend-temp/js/search.js" integrity=""></script>
  </body>
</html>
